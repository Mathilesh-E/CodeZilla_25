<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Medical Translator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-dark: #0f2d2e;
      --bg-fade: linear-gradient(135deg, #1e2d44, #0f1c2e);
      --accent: #00bfff;
      --accent-dark: #007bb5;
      --text-light: #e3f2fd;
      --box-bg: #1b2b44;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-fade);
      color: var(--text-light);
      padding: 20px;
    }

    .container {
      max-width: 700px;
      margin: auto;
      background: var(--box-bg);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 191, 255, 0.2);
      border: 2px solid var(--accent);
    }

    h1 {
      text-align: center;
      color: var(--accent);
      margin-bottom: 25px;
    }

    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
      margin-bottom: 8px;
    }

    textarea, select, button {
      width: 100%;
      padding: 12px;
      font-size: 1em;
      border-radius: 10px;
      margin-bottom: 15px;
      border: 2px solid var(--accent);
      background: #0f1c2e;
      color: var(--text-light);
      box-sizing: border-box;
    }

    textarea::placeholder {
      color: #999;
    }

    button {
      background-color: var(--accent-dark);
      color: white;
      font-weight: bold;
      cursor: pointer;
      border: none;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: var(--accent);
    }

    @media (max-width: 600px) {
      .container {
        padding: 15px;
      }

      button, select, textarea {
        font-size: 1em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üåê CareEcho</h1>

    <label for="role">Select Role:</label>
    <select id="role">
      <option value="doctor">Doctor</option>
      <option value="patient">Patient</option>
    </select>

    <label for="sourceText">Speak or type:</label>
    <textarea id="sourceText" rows="4" placeholder="Say or type something clearly..."></textarea>

    <button onclick="startRecognition()">üé§ Speak</button>

    <label for="fromLang">From:</label>
    <select id="fromLang">
      <option value="en">English</option>
      <option value="ta">Tamil</option>
      <option value="hi">Hindi</option>
      <option value="te">Telugu</option>
    </select>

    <label for="toLang">To:</label>
    <select id="toLang">
      <option value="ta">Tamil</option>
      <option value="en">English</option>
      <option value="hi">Hindi</option>
      <option value="te">Telugu</option>
    </select>

    <button onclick="translateText()">üåç Translate</button>

    <label for="translatedText">Translated:</label>
    <textarea id="translatedText" rows="3" readonly></textarea>

    <button onclick="speakText()">üîä Speak Out</button>

    <div id="descriptionBox">
      <label for="descriptionText">Disease Description:</label>
      <textarea id="descriptionText" rows="5" readonly></textarea>
    </div>
  </div>

  <script>
    const diseases = {
      "malaria": "Malaria is a mosquito-borne disease caused by a parasite. It leads to fever, chills, and flu-like symptoms. If not treated, it can become severe. It's common in tropical regions. Preventive measures include mosquito nets and medication.",
      "diabetes": "Diabetes is a chronic condition that affects how the body processes blood sugar. It requires lifestyle management and sometimes insulin. Symptoms include increased thirst, hunger, and fatigue. Long-term effects can damage organs. Regular monitoring is essential.",
      "asthma": "Asthma is a lung disease that inflames and narrows the airways. It causes wheezing, breathlessness, and coughing. Triggers include dust, pollen, and cold air. Inhalers are commonly used. Managing asthma helps improve daily life.",
      "cancer": "Cancer occurs when abnormal cells grow uncontrollably. It can affect any part of the body. Symptoms vary based on the type. Treatments include surgery, chemotherapy, and radiation. Early detection improves survival.",
      "tuberculosis": "Tuberculosis (TB) is a bacterial infection that mainly affects the lungs. It spreads through the air when an infected person coughs. Symptoms include cough, weight loss, and night sweats. TB is treatable with antibiotics over several months.",
      "dengue": "Dengue is a viral infection spread by mosquitoes. It causes high fever, severe headaches, and joint pain. In serious cases, it can lead to bleeding and organ damage. No specific treatment exists, so prevention is key.",
      "cholera": "Cholera is an acute diarrheal illness caused by bacteria. It spreads through contaminated water or food. Symptoms include watery diarrhea and dehydration. Quick rehydration saves lives. It's common in areas with poor sanitation.",
      "arthritis": "Arthritis causes joint pain and stiffness. There are many types, like osteoarthritis and rheumatoid arthritis. It affects movement and daily activities. Pain relief and exercise help manage it. It often worsens with age.",
      "typhoid": "Typhoid fever is a bacterial infection caused by Salmonella typhi. It spreads through contaminated food and water. Symptoms include fever, weakness, and stomach pain. It‚Äôs treated with antibiotics. Vaccination can prevent it.",
      "epilepsy": "Epilepsy is a brain disorder causing repeated seizures. It results from abnormal electrical activity in the brain. Triggers include stress, lack of sleep, or flashing lights. Medication can control seizures. Regular medical care is needed."
    };

    function startRecognition() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = document.getElementById("fromLang").value;
      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        document.getElementById("sourceText").value = transcript;
      };
      recognition.onerror = (event) => {
        alert("Speech recognition error: " + event.error);
      };
      recognition.start();
    }

    async function translateText() {
      const inputText = document.getElementById("sourceText").value.trim();
      const from = document.getElementById("fromLang").value;
      const to = document.getElementById("toLang").value;
      const role = document.getElementById("role").value;

      document.getElementById("descriptionText").value = "";
      document.getElementById("descriptionBox").style.display = "none";

      if (!inputText) {
        alert("Please enter or speak some text first.");
        return;
      }

      const response = await fetch(https://api.mymemory.translated.net/get?q=${encodeURIComponent(inputText)}&langpair=${from}|${to}&de=kameshwaran.mm2024@vitstudent.ac.in);
      const data = await response.json();
      const translated = data.responseData.translatedText;
      document.getElementById("translatedText").value = translated;

      if (role === "doctor") {
        const detectedDisease = detectDisease(inputText.toLowerCase()) || detectDisease(translated.toLowerCase());
        if (detectedDisease) {
          const englishDescription = diseases[detectedDisease];
          const descResponse = await fetch(https://api.mymemory.translated.net/get?q=${encodeURIComponent(englishDescription)}&langpair=en|${to}&de=kameshwaran.mm2024@vitstudent.ac.in);
          const descData = await descResponse.json();
          document.getElementById("descriptionText").value = descData.responseData.translatedText;
        } else {
          document.getElementById("descriptionText").value = "No known disease detected.";
        }
        document.getElementById("descriptionBox").style.display = "block";
      }
    }

    function detectDisease(text) {
      for (const disease in diseases) {
        if (text.includes(disease)) {
          return disease;
        }
      }
      return null;
    }

    function speakText() {
      const text = document.getElementById("translatedText").value;
      const lang = document.getElementById("toLang").value;

      if (!text.trim()) {
        alert("Nothing to speak!");
        return;
      }

      const utterance = new SpeechSynthesisUtterance(text);

      const supportedLangs = ['en', 'hi'];
      if (!supportedLangs.includes(lang)) {
        alert("Text-to-speech may not be supported for this language.");
        return;
      }

      utterance.lang = lang;
      speechSynthesis.speak(utterance);
    }

    document.getElementById("role").addEventListener("change", () => {
      if (document.getElementById("role").value === "doctor") {
        document.getElementById("descriptionBox").style.display = "block";
      } else {
        document.getElementById("descriptionBox").style.display = "none";
      }
    });

    document.getElementById("descriptionBox").style.display = "none";
  </script>
</body>
</html>
