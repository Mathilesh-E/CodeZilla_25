<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Medical Translator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-dark: #0f2d2e;
      --bg-fade: linear-gradient(135deg, #1e2d44, #0f1c2e);
      --accent: #00bfff;
      --accent-dark: #007bb5;
      --text-light: #e3f2fd;
      --box-bg: #1b2b44;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-fade);
      color: var(--text-light);
      padding: 20px;
    }

    .container {
      max-width: 700px;
      margin: auto;
      background: var(--box-bg);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 191, 255, 0.2);
      border: 2px solid var(--accent);
    }

    h1 {
      text-align: center;
      color: var(--accent);
      margin-bottom: 25px;
    }

    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
      margin-bottom: 8px;
    }

    textarea, select, button {
      width: 100%;
      padding: 12px;
      font-size: 1em;
      border-radius: 10px;
      margin-bottom: 15px;
      border: 2px solid var(--accent);
      background: #0f1c2e;
      color: var(--text-light);
      box-sizing: border-box;
    }

    textarea::placeholder {
      color: #999;
    }

    button {
      background-color: var(--accent-dark);
      color: white;
      font-weight: bold;
      cursor: pointer;
      border: none;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: var(--accent);
    }

    @media (max-width: 600px) {
      .container {
        padding: 15px;
      }

      button, select, textarea {
        font-size: 1em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üåê CareEcho</h1>

    <label for="role">Select Role:</label>
    <select id="role">
      <option value="doctor">Doctor</option>
      <option value="patient">Patient</option>
    </select>

    <label for="sourceText">Speak or type:</label>
    <textarea id="sourceText" rows="4" placeholder="Say or type something clearly..."></textarea>

    <button onclick="startRecognition()">üé§ Speak</button>

    <label for="fromLang">From:</label>
    <select id="fromLang">
      <option value="en">English</option>
      <option value="ta">Tamil</option>
      <option value="hi">Hindi</option>
      <option value="te">Telugu</option>
    </select>

    <label for="toLang">To:</label>
    <select id="toLang">
      <option value="ta">Tamil</option>
      <option value="en">English</option>
      <option value="hi">Hindi</option>
      <option value="te">Telugu</option>
    </select>

    <button onclick="translateText()">üåç Translate</button>

    <label for="translatedText">Translated:</label>
    <textarea id="translatedText" rows="3" readonly></textarea>

    <button onclick="speakText()">üîä Speak Out</button>

    <div id="descriptionBox">
      <label for="descriptionText">Disease Description:</label>
      <textarea id="descriptionText" rows="5" readonly></textarea>
      <button onclick="speakdes()">üîä Speak Out</button>
    </div>

  </div>

  <script>
    const diseases = {
      "malaria": "Malaria is a mosquito-borne disease caused by a parasite. It leads to fever, chills, and flu-like symptoms. If not treated, it can become severe. It's common in tropical regions. Preventive measures include mosquito nets and medication.",
  "diabetes": "Diabetes is a chronic condition that affects how the body processes blood sugar. It requires lifestyle management and sometimes insulin. Symptoms include increased thirst, hunger, and fatigue. Long-term effects can damage organs. Regular monitoring is essential.",
  "asthma": "Asthma is a lung disease that inflames and narrows the airways. It causes wheezing, breathlessness, and coughing. Triggers include dust, pollen, and cold air. Inhalers are commonly used. Managing asthma helps improve daily life.",
  "cancer": "Cancer occurs when abnormal cells grow uncontrollably. It can affect any part of the body. Symptoms vary based on the type. Treatments include surgery, chemotherapy, and radiation. Early detection improves survival.",
  "tuberculosis": "Tuberculosis (TB) is a bacterial infection that mainly affects the lungs. It spreads through the air when an infected person coughs. Symptoms include cough, weight loss, and night sweats. TB is treatable with antibiotics over several months.",
  "dengue": "Dengue is a viral infection spread by mosquitoes. It causes high fever, severe headaches, and joint pain. In serious cases, it can lead to bleeding and organ damage. No specific treatment exists, so prevention is key.",
  "cholera": "Cholera is an acute diarrheal illness caused by bacteria. It spreads through contaminated water or food. Symptoms include watery diarrhea and dehydration. Quick rehydration saves lives. It's common in areas with poor sanitation.",
  "arthritis": "Arthritis causes joint pain and stiffness. There are many types, like osteoarthritis and rheumatoid arthritis. It affects movement and daily activities. Pain relief and exercise help manage it. It often worsens with age.",
  "typhoid": "Typhoid fever is a bacterial infection caused by Salmonella typhi. It spreads through contaminated food and water. Symptoms include fever, weakness, and stomach pain. It‚Äôs treated with antibiotics. Vaccination can prevent it.",
  "epilepsy": "Epilepsy is a brain disorder causing repeated seizures. It results from abnormal electrical activity in the brain. Triggers include stress, lack of sleep, or flashing lights. Medication can control seizures. Regular medical care is needed.",
  "hypertension": "Hypertension, or high blood pressure, increases the risk of heart disease and stroke. It often has no symptoms but can damage blood vessels over time. Lifestyle changes and medication help control it.",
  "influenza": "Influenza, or flu, is a contagious viral infection affecting the nose, throat, and lungs. Symptoms include fever, chills, and muscle aches. Annual vaccines help prevent it.",
  "pneumonia": "Pneumonia is an infection that inflames the air sacs in one or both lungs. Symptoms include cough, fever, and difficulty breathing. It can be caused by bacteria, viruses, or fungi.",
  "bronchitis": "Bronchitis is inflammation of the bronchial tubes in the lungs. Symptoms include coughing with mucus, fatigue, and shortness of breath. It may be acute or chronic.",
  "measles": "Measles is a highly contagious viral infection. Symptoms include high fever, cough, runny nose, and a red rash. Vaccination is the best prevention.",
  "mumps": "Mumps is a contagious disease causing swelling of the salivary glands. Symptoms include fever, headache, and muscle aches. Vaccination can prevent it.",
  "hepatitis": "Hepatitis is inflammation of the liver, often caused by viral infection. Types include A, B, and C. Symptoms may include jaundice, fatigue, and abdominal pain.",
  "jaundice": "Jaundice is yellowing of the skin and eyes due to high bilirubin levels. It can result from liver disease, bile duct problems, or blood disorders.",
  "anemia": "Anemia is a condition in which there is a lack of healthy red blood cells. It causes fatigue, weakness, and shortness of breath.",
  "obesity": "Obesity is excessive body fat that increases the risk of diseases such as diabetes, heart disease, and certain cancers. It is managed through diet, exercise, and sometimes surgery.",
  "stroke": "A stroke occurs when blood supply to part of the brain is reduced or interrupted. Symptoms include sudden weakness, speech problems, and vision loss. Immediate treatment is crucial.",
  "heart attack": "A heart attack happens when blood flow to the heart muscle is blocked. Symptoms include chest pain, shortness of breath, and sweating. Emergency care is essential.",
  "psoriasis": "Psoriasis is a chronic skin condition causing red, scaly patches. It occurs when skin cells build up rapidly. Treatments aim to slow skin cell growth.",
  "eczema": "Eczema is a skin condition causing redness, itching, and dryness. It can be triggered by allergens, stress, or weather changes.",
  "migraine": "Migraine is a severe headache often accompanied by nausea and sensitivity to light and sound. Triggers vary by person.",
  "depression": "Depression is a mental health disorder causing persistent sadness and loss of interest. It can affect daily functioning and requires therapy or medication.",
  "anxiety": "Anxiety is excessive worry or fear that can interfere with daily activities. It can be managed through therapy, relaxation techniques, and medication.",
  "insomnia": "Insomnia is difficulty falling asleep or staying asleep. It can be caused by stress, anxiety, or medical conditions.",
  "fatigue": "Fatigue is extreme tiredness not relieved by rest. It can be caused by illness, poor sleep, or overexertion.",
  "vomiting": "Vomiting is the forceful expulsion of stomach contents. It can be caused by infection, food poisoning, or motion sickness.",
  "nausea": "Nausea is the sensation of wanting to vomit. It can accompany many illnesses.",
  "diarrhea": "Diarrhea is frequent, loose, or watery bowel movements. It can cause dehydration if severe.",
  "constipation": "Constipation is infrequent or difficult bowel movements. It can be managed with diet and hydration.",
  "appendicitis": "Appendicitis is inflammation of the appendix. Symptoms include abdominal pain, nausea, and fever. Surgery is usually required.",
  "kidney stones": "Kidney stones are hard deposits of minerals in the kidneys. They can cause severe pain and blood in urine.",
  "urinary tract infection": "A UTI is an infection in any part of the urinary system. Symptoms include burning urination and frequent urge to urinate.",
  "heat stroke": "Heat stroke is a serious condition caused by overheating. Symptoms include confusion, dry skin, and high body temperature.",
  "burn": "A burn is injury to the skin caused by heat, chemicals, or electricity. Severity varies by depth and area affected.",
  "fracture": "A fracture is a break in a bone. Treatment depends on location and severity.",
  "sprain": "A sprain is stretching or tearing of ligaments. Symptoms include pain, swelling, and limited movement.",
  "conjunctivitis": "Conjunctivitis, or pink eye, is inflammation of the membrane covering the eye. It can be caused by infection or allergies.",
  "ear infection": "Ear infections are often caused by bacteria or viruses. Symptoms include ear pain, fever, and hearing loss.",
  "sinusitis": "Sinusitis is inflammation of the sinuses. Symptoms include facial pain, nasal congestion, and headache.",
  "tonsillitis": "Tonsillitis is inflammation of the tonsils, often due to infection. Symptoms include sore throat and difficulty swallowing.",
  "gastritis": "Gastritis is inflammation of the stomach lining. Symptoms include stomach pain, nausea, and bloating.",
  "ulcer": "An ulcer is an open sore in the stomach or intestines. Symptoms include burning pain and indigestion.",
  "gallstones": "Gallstones are hardened deposits in the gallbladder. They can block bile flow and cause pain.",
  "liver cirrhosis": "Cirrhosis is scarring of the liver caused by chronic damage. Symptoms include fatigue, jaundice, and easy bleeding.",
  "paralysis": "Paralysis is loss of muscle function in part of the body. It can be caused by nerve injury or stroke.",
  "seizure": "A seizure is sudden abnormal electrical activity in the brain. Symptoms include convulsions and loss of awareness.",
  "bleeding": "Bleeding is the loss of blood from blood vessels. It can be internal or external.",
  "pregnancy": "Pregnancy is the condition of carrying a developing embryo or fetus. Proper care ensures maternal and child health.",
  "miscarriage": "Miscarriage is the loss of a pregnancy before 20 weeks. Causes vary and are often unknown.",
  "menstrual cramps": "Menstrual cramps are throbbing pains in the lower abdomen during menstruation.",
  "infertility": "Infertility is the inability to conceive after a year of trying. It can be due to male or female factors.",
  "fever": "A fever is when your body temperature is higher than your normal average temp. Most providers say a fever is either 100.0 F (37.8 C) or 100.4 F (38 C)."
 };

    function startRecognition() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = document.getElementById("fromLang").value;
      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        document.getElementById("sourceText").value = transcript;
      };
      recognition.onerror = (event) => {
        alert("Speech recognition error: " + event.error);
      };
      recognition.start();
    }

    async function translateText() {
      const inputText = document.getElementById("sourceText").value.trim();
      const from = document.getElementById("fromLang").value;
      const to = document.getElementById("toLang").value;
      const role = document.getElementById("role").value;

      document.getElementById("descriptionText").value = "";
      document.getElementById("descriptionBox").style.display = "none";

      if (!inputText) {
        alert("Please enter or speak some text first.");
        return;
      }

      const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(inputText)}&langpair=${from}|${to}&de=kameshwaran.mm2024@vitstudent.ac.in`);
      const data = await response.json();
      const translated = data.responseData.translatedText;
      document.getElementById("translatedText").value = translated;

      if (role === "doctor") {
        const detectedDisease = detectDisease(inputText.toLowerCase()) || detectDisease(translated.toLowerCase());
        if (detectedDisease) {
          const englishDescription = diseases[detectedDisease];
          const descResponse = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(englishDescription)}&langpair=en|${to}&de=kameshwaran.mm2024@vitstudent.ac.in`);
          const descData = await descResponse.json();
          document.getElementById("descriptionText").value = descData.responseData.translatedText;
        } else {
          document.getElementById("descriptionText").value = "No known disease detected.";
        }
        document.getElementById("descriptionBox").style.display = "block";
      }
    }

    function detectDisease(text) {
      for (const disease in diseases) {
        if (text.includes(disease)) {
          return disease;
        }
      }
      return null;
    }

    function speakText() {
      const text = document.getElementById("translatedText").value;
      const lang = document.getElementById("toLang").value;

      if (!text.trim()) {
        alert("Nothing to speak!");
        return;
      }
    }

function speakdes() {
      const text = document.getElementById("descriptionText").value;
      const lang = document.getElementById("toLang").value;

      if (!text.trim()) {
        alert("Nothing to speak!");
        return;
      }


      const utterance = new SpeechSynthesisUtterance(text);

      const supportedLangs = ['en', 'hi'];
      if (!supportedLangs.includes(lang)) {
        alert("Text-to-speech may not be supported for this language.");
        return;
      }

      utterance.lang = lang;
      speechSynthesis.speak(utterance);
    }

    document.getElementById("role").addEventListener("change", () => {
      if (document.getElementById("role").value === "doctor") {
        document.getElementById("descriptionBox").style.display = "block";
      } else {
        document.getElementById("descriptionBox").style.display = "none";
      }
    });

    document.getElementById("descriptionBox").style.display = "none";
  </script>
</body>
</html>